<div class="container">
  <div class="page-content">
    <div class="basic">
      <app-basic-form-navigation [navigation]="navigation" class="hide-62em"></app-basic-form-navigation>

      <div class="basic-form">
        <app-page-header [header]="pageHeader"></app-page-header>

        <form [formGroup]="myForm">
          <mat-tab-group [selectedIndex]="navigation.selectedItem" class="tab-no-labels">
            <mat-tab label="Dados da Transmissão">
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon">people</mat-icon>
                Dados da Transmissão
              </ng-template>

              <div class="label-group">
                <app-search-loading-unique class="label-w50" [search]="searchWhatsapp"></app-search-loading-unique>

                <label class="label-w50">
                  <span class="field">Título</span>
                  <input formControlName="title" type="text">
                </label>
              </div>

              <div class="basic-form-header">
                <h3>Observações gerais</h3>
              </div>

              <div class="label-group">
                <label class="label-w100">
                  <span class="field">Mensagem</span>
                  <textarea formControlName="post"></textarea>
                </label>
              </div>
            </mat-tab>

            <mat-tab label="Conatos">
              <ng-template mat-tab-label>
                <mat-icon class="example-tab-icon">phone</mat-icon>
                Contatos
              </ng-template>

              <div class="shopping-budget">
                <div class="shopping-budget-grid" style="border: none !important">
                  <ng-container formArrayName="messages">
                    <div *ngFor="let message of messages.controls; index as i" class="shopping-budget-grid-list" style="border: 1px solid #C9D3DD; margin-bottom: 20px;">
                      <ul class="shopping-budget-grid-header" style="padding: 0 10px;">
                        <li style="width: 50%;">Contato</li>
                        <li style="width: 30%;">Email</li>
                        <li style="width: 20%;">Telefone</li>
                      </ul>

                      <ng-container [formGroupName]="i">
                        <div class="label-group">
                          <app-search-loading-unique style="width: 50%" [search]="contactsOutPut[i]" (eventEmit)="selectContact($event, i)"></app-search-loading-unique>

                          <label style="width: 30%">
                            <span class="label-title">Email</span>
                            <input formControlName="email" type="text" readonly>
                          </label>

                          <label style="width: 20%">
                            <span class="label-title">Telefone</span>
                            <input formControlName="phone" type="text" readonly>
                          </label>

                          <button class="add-item" mat-icon-button (click)="removeContact(i)">
                            <mat-icon>clear</mat-icon>
                          </button>
                        </div>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>

                <div class="shopping-budget-footer">
                  <div class="amount-button-add">
                    <button mat-button (click)="addContact(null)">Adicionar contato</button>
                  </div>
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </form>

        <app-basic-form-buttons [navigation]="navigationButtons"></app-basic-form-buttons>
      </div>
    </div>
  </div>
</div>

<app-loading-full [loadingFull]="loadingFull"></app-loading-full>
